# 1 리팩터링
## 1.1 점진적인 리팩토링
- 기존의 테스트 코드가 깨지지 않는 상태로 리팩터링
- 컴파일 에러 발생을 최소화하면서 리팩터링

<br>

## 1.2 자주 마주하는 상황
- 함수에 인자 추가 -> 테스트 깨짐
- 함수 인자 타입 변경 -> 테스트 깨짐
- 위 두가지 경험을 하게 되면 테스트 코드에 대하여 부정적인 생각을 가지게 될 수 있다.

<br>

## 1.3 함수에 인자가 추가되는 경우
- (1) 변경하려는 함수를 그대로 복사
- (2) 예를들어, `match()` 를 `match2()` 로 변경
- (3) `match()` 를 사용하는 코드가 더 이상 존재하지 않으면 `match()` 제거
- (4) `match2()` 를 `match()`로 이름 변경

<br>

## 1.4 인스턴스 변수 타입이 변경되는 경우
- (1) 새로운 인스턴스 변수 추가
- (2) 예를들어 `String` 에서 `INT` 로 변경한다면 일시적으로 두 개의 타입을 동시에 가짐
- (3) 두 개의 변수에 동시에 데이터를 할당하고 변경하도록 변경

<br>

## 1.5 점진적인 리팩토링 케이스
- (1) 함수를 다른 클래스로 이동
- (2) 함수를 인자 타입이나 수, 반환 값이 변경되는 경우
- (3) 인스턴스 변수의 타입이 변경되는 경우

<br>

## 1.6 Test fixture
- 코틀린은 생성자를 호출할 때 new 키워드를 붙일 필요가 없다.
- 그래서 테스트 코드를 작성할 때 아래와 같이 대문자로 메서드를 선언하여 가짜 생성자를 만들 수 있다.

![image](https://user-images.githubusercontent.com/60383031/174097765-1638c604-0534-40f6-b1f6-5963f3bf349a.png)

- 실제 객체에 테스트를 위한 생성자를 만들지 않기 때문에 테스트 / 실제코드 간 영향을 끼치지 않는다.

<br>

## 1.7 위임

![image](https://user-images.githubusercontent.com/60383031/177030207-77ced123-b4bc-48c6-857a-908ab105e3cb.png)

- `by` 키워드를 사용하여 위임패턴을 간단하게 구현할 수 있다.

![image](https://user-images.githubusercontent.com/60383031/177030227-e173c72b-22d0-4e38-a9b6-5379644322d3.png)

- 컬렉션을 위임하였기 때문에 컬렉션이 가지고 있는 메서드들을 자유롭게 사용이 가능하다.
- 단점으로는 너무 많은 책임이 외부로 노출이 될 수 있다. 트레이드 오프가 명확한 기능인 것 같다.

<br>

# 2. 객체지향
## 2.1 핵심
- 역할(role), 책임(responsibility), 협력(collaboration)
- 협력을 구성하기 위해 적절한 객체를 찾고 적절한 책임을 할당하는 과정

<br>

## 2.2 구현 방식
### Bottom Up 구현 및 설계
- 구현에 초점을 맞춰 일단 구현한 후 지속적인 리팩터링을 통해 객체의 역할, 책임, 협력을 찾아 나가면서 설계를 개선해 나가는 접근 방식

### Top Down 설계 및 구현
- 책임에 초점을 맞춰 전체적인 설계의 방향과 흐름을 결정한 후 구현을 시작하는 접근 방식
- 책임 주도 설계(Responsibility-Driven Design)라고 부른다.

<br>

## 3.2 Bottom Up 구현 및 설계
### 일단 구현 !!!
- 객체 설계를 어떻게 해야할지 모르겠다면 시작은 최상위 함수 구현으로 시작한 후 지속적인 리팩터링
- 도메인 (비즈니스)를 모르기 때문에 일단 구현한 이후 리팩토링 

<br>

## 3.3 Top Down 설계 및 구현 - 책임 주도 설계
### 책임
- 객체에 의해 정의되는 응집도 있는 행위의 집합으로 객체가 유지해야 하는 정보와 수행할 수 있는 행동에 대한 개략적으로 서술한 문장
- 즉, 객체가 '무엇을 알고 있는가'와 '무엇을 할 수 있는가'로 구성

### 하는 것
- 객체를 생성하거나 계산을 수행하는 등의 스스로 하는 것
- 다른 객체의 행동을 시작시키는 것
- 다른 객체의 활동을 제어하고 조절하는 것

### 아는 것
- 사적인 정보에 관해 아는 것
- 관련된 객체에 대해 아는 것
- 자신이 유도하거나 계산할 수 있는 것에 관해 아는 것




